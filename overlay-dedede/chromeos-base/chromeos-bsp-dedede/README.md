**Configuration for dedede will now be managed on a per-project basis
with the goal of enabling autonomous and flexible partner contributions and
clearer API boundaries.**

Starlark -- a Python-like configuration-management language -- will be used to
generate Protocol Buffer configuration payloads in [chromeos/project/dedede](https://chrome-internal.googlesource.com/chromeos/project/dedede)
repos and model.yaml will be deleted from [overlay-dedede](https://chromium.googlesource.com/chromiumos/overlays/board-overlays/+/refs/heads/master/overlay-dedede)
and [overlay-dedede-private](https://chrome-internal.googlesource.com/chromeos/overlays/overlay-dedede-private).
A few resources to get started:

*   [Starlark language guide](https://docs.bazel.build/versions/master/skylark/language.html): A quick introduction guide to Starlark.
*   [chromiumos/config README](https://chromium.googlesource.com/chromiumos/config/+/refs/heads/master/README.md):
    Steps for partners and Googlers to check out their repos and contribute
    changes.
*   [fake test data project](https://chromium.googlesource.com/chromiumos/config/+/refs/heads/master/test/project/fake/fake):
    Working example of the new config ecosystem.

Changes will be made in the following repos:

*   [chromeos/project/dedede](https://chrome-internal.googlesource.com/chromeos/project/dedede) repos:
    Contains Starlark files, generated protobuf payloads, and backwards-compatible
    JSON payloads.
*   [overlay-dedede-private](https://chrome-internal.googlesource.com/chromeos/overlays/overlay-dedede-private):
    `chromeos-config-bsp-dedede-private` sets `CROS_WORKON_PROJECT`
    to [chromeos/project/dedede](https://chrome-internal.googlesource.com/chromeos/project/dedede) repos.
    model.yaml is deleted.

We understand that getting used to the new configuration management ecosystem
may take some time, and are committed to providing the best experience possible
for partners and Googlers. Please contact the project TAM/SIE for issues and
feedback, which will be relayed in timely fashion.

## Frequently Asked Questions

1. **Why are we doing this migration?**

Configuration data for ChromeOS hardware, firmware, and software has been spread
across multiple data silos and formats. This has made the effects of configuration
changes confusing and inhibited analytics that could drive project planning and
infrastructure. This migration will provide a coherent and clear API ecosystem.

Benefits include:

*   Clearer API boundaries to manage builds and hardware.
*   Enable autonomous partner config contributions, enforced via CQ coverage.
*   Allow partners to develop proprietary features without leaking IP.
*   Final generated config payloads are checked in allowing for clear behavior
    and diffing.
*   Improved analytics on hardware and software characteristics.

2. **Will I need to change my ChromeOS platform code?**

No. For the time being, the protobuf payloads will be translated backwards into
JSON payloads conforming to
[cros\_config\_schema.yaml](https://chromium.git.corp.google.com/chromiumos/platform2/+/refs/heads/master/chromeos-config/cros_config_host/cros_config_schema.yaml).
From the platform point-of-view, the configuration will not change.

3. **Will this break my builds?**

No. During the migration, we will ensure that configuration generated by the new
repos is the same as the configuration generated by model.yaml. Standard CQ
coverage will apply to the migration CLs and stakeholders will be added as
reviewers. Migration will be done in a single submission that can be reverted.

4. **How will I cherry pick changes to branches?**

If your project has not yet created branches, you will only need to cherry pick
changes to the generated payloads in the new config repos. If your project has
created branches, you will need to cherry pick the ebuild change to read the new
config repos as well. The Boxster team will be available to assist in the cherry
pick process.
